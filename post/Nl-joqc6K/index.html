<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<!--百度gg-->
<meta name="baidu_union_verify" content="cc00dc66a90de929a0433e5c9366e0b6">
<!--google-->
<meta name="google-site-verification" content="8NDiYXaPEGf-aNpXjDZyC8-blGG8-Al4E6EFq3BsyZo" />
<title>《计算机网络》复习 - 王荣胜</title>
<link rel="shortcut icon" href="https://Wangrongsheng.github.io/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<!--UI-->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/mdui/0.4.3/css/mdui.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/mdui/0.4.3/js/mdui.min.js"></script>

<link rel="stylesheet" href="https://Wangrongsheng.github.io/media/css/tailwind.css">
<link rel="stylesheet" href="https://Wangrongsheng.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="《计算机网络》复习 - 王荣胜 - Atom Feed" href="https://Wangrongsheng.github.io/atom.xml">

    

  <meta name="description" content="
一、绪论
1.1计算机网络
计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。
计算机网络向用户提供的两个最重要的功能：

数据通信（连通性）：计算机网络最基本..." />
  <meta property="og:title" content="《计算机网络》复习 - 王荣胜">
  <meta property="og:description" content="
一、绪论
1.1计算机网络
计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。
计算机网络向用户提供的两个最重要的功能：

数据通信（连通性）：计算机网络最基本..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://Wangrongsheng.github.io/post/Nl-joqc6K/" />
  <meta property="og:image" content="https://Wangrongsheng.github.io/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="《计算机网络》复习 - 王荣胜">
  <meta name="twitter:description" content="
一、绪论
1.1计算机网络
计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。
计算机网络向用户提供的两个最重要的功能：

数据通信（连通性）：计算机网络最基本...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://Wangrongsheng.github.io/post/Nl-joqc6K/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
 
  
    <link rel="stylesheet" href="https://Wangrongsheng.github.io/media/css/prism-atom-dark.css">
  

  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://Wangrongsheng.github.io" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      王荣胜
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          《计算机网络》复习
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2020-05-27 · 29 min read</div>
          
            <a href="https://Wangrongsheng.github.io/tag/jsjwl/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              计算机网络
            </a>
          
          

          <div class="share" style="margin-left: auto;margin-right: 20px;cursor: pointer;" onclick="share(this)">
          <a class="text-gray-400"><i class="ri-qr-code-line" style="position:relative; top:2px"></i><a href="https://s1.ax1x.com/2020/04/13/Gjp7IU.png" target="_blank">手机阅读</a></a>
          </div>
          
          
          
        

          
        </div>
        <div class="markdown mb-8" v-pre>
          <!-- more -->
<h1 id="一-绪论">一、绪论</h1>
<h2 id="11计算机网络">1.1计算机网络</h2>
<p>计算机网络：是一个将分散的、具有独立功能的计算机系统，通过通信设备与线路连接起来，由功能完善的软件实现资源共享和信息传递的系统。</p>
<p>计算机网络向用户提供的两个最重要的功能：</p>
<ul>
<li><strong>数据通信</strong>（连通性）：计算机网络最基本最重要的功能。</li>
<li><strong>资源共享</strong></li>
</ul>
<h2 id="12因特网概述">1.2因特网概述</h2>
<p>因特网发展的三个阶段：</p>
<ul>
<li>第一阶段：从单个网络 ARPANET 向互联网发展的过程。1983 年 TCP/IP 协议成为 ARPANET 上的标准协议。</li>
<li>第二阶段：建成三级结构的因特网：主干网、地区网和校园网（或企业网）。</li>
<li>第三阶段：形成多层次的ISP（Internet Service Provider 因特网服务提供者）结构的因特网</li>
</ul>
<p>Internet 和 Internet 的区别：</p>
<ul>
<li>internet：通用名词，它泛指由多个计算机网络互连而成的网络。</li>
<li>Internet：专用名词，它指当前全球最大的、开放的、由众多网络相互连接而成的特定计算机网络，它采用 TCP/IP 协议族作为通信的规则，且其前身是美国的 ARPANET。</li>
</ul>
<h2 id="13互联网的组成p8">1.3互联网的组成P8</h2>
<p><strong>边缘部分</strong> ：由所有连接在因特网上的主机组成。这部分由<strong>用户直接使用</strong> ，用来进行通信和资源共享。</p>
<p><strong>核心部分</strong>  : 由大量的网络和连接这些网络的路由器组成。这部分是<strong>为边缘部分提供服务的</strong> （提供连通性和交换）。</p>
<p>处于边缘部分的用户通信方式 P9-P10</p>
<ul>
<li>
<p>客户服务器方式（<strong>C/S</strong> 方式）：即 Client/Server 方式。（客户是服务的请求方，服务器是服务的提供方）</p>
</li>
<li>
<p>对等方式（<strong>P2P</strong> 方式）：即 Peer-to-Peer 方式。（对等连接中的每一个主机既是客户又同时是服务器）</p>
</li>
</ul>
<p>核心部分的交换技术 P11-15</p>
<ul>
<li>
<p><strong>电路交换</strong> 的三个阶段：建立连接——通话——释放连接<br>
在通话时，两用户之间占用端到端的资源，而由于绝大部分时间线路都是空闲的，所以线路的传输速率往往很低。</p>
</li>
<li>
<p><strong>分组交换</strong> 的组成：报文、首部、分组。采用存储转发技术，即收到分组——存储分组——查询路由（路由选择协议）——转发分组。优点：高效、灵活、迅速、可靠。缺点：时延、开销。关键构件：路由器。</p>
</li>
<li>
<p><strong>报文交换</strong> 整个报文传送到相邻结点，全部存储下来之后查询转发表，转发到下一个结点。</p>
</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpaK00.png" alt="tpaK00.png" border="0" /></center>
<h2 id="14计算机网络的类别p17">1.4计算机网络的类别P17</h2>
<p>分类</p>
<ul>
<li>按通信距离分：广域网、局域网、城域网</li>
<li>按网络拓扑结构分：星型网、树型网、环型网、总线网</li>
<li>按传输带宽分：基带网、宽带网</li>
<li>按使用范围分：公用网、专用网</li>
<li>按速率分：高速网、中速网、低速网</li>
<li>按通信传播方式分：广播式、点到点式
<ul>
<li>广播式网络：共享公共通信通道</li>
<li>点对点网络：使用分组存储转发和路由选择机制</li>
<li>性能指标（P18）：速率、带宽、时延</li>
</ul>
</li>
<li><strong>速率</strong> ：指连接在计算机网络上的主机在数字信道上传送数据的速率。b/s（bps） 如100M以太网，实际是指100Mb/s。往往是指额定速率或标称速率。</li>
<li><strong>带宽</strong> ：数字信道所能传送的最高速率。b/s（bps）</li>
<li><strong>吞吐量</strong> ：单位时间内通过某个网络（或信道、接口）的实际数据量。其绝对上限值等于带宽。</li>
<li><strong>时延</strong> ：数据（一个报文或分组、甚至比特）从网络（或链路）的一段传送到另一端的时间，也称延迟。<br>
① 发送时延：主机或路由器发送数据帧所需的时间，也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。也成传输时延。<br>
发送时延 = 数据帧长度（b） / 信道带宽（b/s）<br>
    ② 传播时延：电磁波在信道中传输一定距离所需划分的时间。<br>
传播时间 = 信道长度（m） / 传输速率（m/s）<br>
    ③ 处理时延：主机或路由器处理收到的分组所花费的时间。<br>
    ④ 排队时延：分组在输入队列中等待处理的时间加上其在输出队列中等待转发的时间。<br>
综上：总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延。<br>
注：对于高速网络链路，提高的是发送速率而不是传播速率。</li>
<li>时延带宽积：传播时延 * 带宽。表示链路的容量。</li>
<li>往返时间RTT：从发送方发送数据开始，到发送发收到接收方的确认为止，所花费的时间。</li>
<li>利用率：某信道有百分之几是被利用的（有数据通过）。而信道或网络利用率过高会产生非常大的时延。<br>
当前时延=空闲时时延/（1-利用率）</li>
</ul>
<h2 id="15计算机网络的体系结构p25">1.5计算机网络的体系结构P25</h2>
<p><strong>网络协议</strong> ：简称协议，是为了进行网络中的数据交换而建立的规则、标准或约定，是控制两个对等实体进行通信的规则的集合。在协议的控制下，两个对等实体间的通信使得本层能够向上一层提供服务，而要实现本层协议，还需要使用下一层提供的服务。</p>
<p>网络协议的三要素</p>
<ul>
<li>语法：数据与控制信息的结构或格式</li>
<li>语义：需要发出何种控制信息，完成何种动作以及做出何种响应</li>
<li>同步：事件实现顺序的详细说明</li>
</ul>
<p><strong>实体</strong> ：第 n 层的活动元素称为 n 层实体。同一层的实体叫<strong>对等实体</strong> 。</p>
<p><strong>接口</strong> ：上层使用下层服务的入口</p>
<p><strong>服务</strong> ：下层为相邻上层提供的功能调用。</p>
<p><strong>体系结构</strong> (architecture)简称<strong>分层结构</strong> ，是计算机网络的各层及其协议的集合。</p>
<p>7 层 <strong>OSI 参考模型</strong>：</p>
<ul>
<li>物理层、数据链路层、网络层：提供点到点的服务</li>
<li>传输层、会话层、表示层、应用层：提供端到端的服务</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpaqun.png" alt="tpaqun.png" border="0" /></center>
<p>4 层 <strong>TCP/IP 参考模型</strong> ：网络接口层、网际层IP、运输层、应用层</p>
<ul>
<li>TCP/IP 设计之初就考虑到异构网互联问题，将 IP 作为重要层次；而 OSI 参考模型先于协议发明，不偏向特定协议。</li>
<li>两者常考的异同点：OSI 参考模型网络层是「无连接+面向连接」，而 TCP/IP 模型是「无连接」的；OSI 参考模型传输层是「面向连接」，而 TCP/IP 模型是「无连接+面向连接」。</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpavNT.png" alt="tpavNT.png" border="0" /></center>
<p>五层协议的体系结构（综合了 OSI 和 TCP/IP 的优点）</p>
<ul>
<li><strong>物理层</strong> ：物理层的任务就是透明地传送比特流。（注意：传递信息的物理媒体，如双绞线、同轴电缆、光缆等，是在物理层的下面，当做第0 层。）物理层还要确定连接电缆插头的定义及连接法。</li>
<li><strong>数据链路层</strong> ：将网络层交下来的IP数据报组装成帧，在两个相邻结点间的链路上”透明“的传送以帧为单位的数据。每一帧包括数据和必要的控制信息。在收到数据时，控制信息使收到端直到哪个帧从哪个比特开始和结束。</li>
<li><strong>网络层</strong> ：选择合适的路由，使发送站的运输层所传下来的分组能够正确无误地按照地址找到目的站，并交付给目的站的运输层。网络层将运输层产生的报文或用户数据报封装成分组（IP数据报）或包进行传送。</li>
<li><strong>运输层</strong> ：向上一层的进行通信的两个进程之间提供一个可靠的端对端服务，使它们看不见运输层以下的数据通信的细节。（TCP、UDP）</li>
<li><strong>应用层</strong> ：直接为用户的应用进程提供服务（HTTP、FTP等）</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpd9gJ.jpg" alt="tpd9gJ.jpg" border="0" /></center>
<h1 id="二-物理层">二、物理层</h1>
<h2 id="21物理层基础概念">2.1物理层基础概念</h2>
<p>物理层解决如何在连接各种计算机的传输媒体上传输数据比特流，而不是值具体的传输媒体。</p>
<p>物理层特性：</p>
<ul>
<li>机械特性</li>
<li>电气特性</li>
<li>功能特性</li>
<li>规程特性</li>
</ul>
<h2 id="22数据通信基础知识">2.2数据通信基础知识</h2>
<p><strong>数据</strong> ：传递信息的实体，通常是有意义的符号序列。</p>
<p><strong>信号</strong> ：数据的电气/电磁的表现，是数据在传输过程中的存在形式。</p>
<ul>
<li>数字信号：代表消息的参数取值是离散的</li>
<li>模拟信号：代表信号的参数取值是连续的</li>
</ul>
<p><strong>信源</strong> ：产生和发送数据的源头。</p>
<p><strong>信宿</strong> ：接收数据的终点</p>
<p><strong>信道</strong> ：信号的传输媒介。一般用来表示像某一个方向传输信号的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。</p>
<p>三种通信方式：</p>
<ul>
<li><strong>单工通信</strong> ：只有一个方向的通信而没有反方向的交互，仅需一条信道。</li>
<li><strong>半双工通信</strong> ：通信的双方都可以发送或接受信息，但任何一方都不能同时发送和接收，需要两条信道。</li>
<li><strong>全双工通信</strong> ：通信双方可以同时发送和接收信息，也需要两条信道。</li>
</ul>
<p>两种数据传输方式：</p>
<ul>
<li><strong>串行传输</strong> ：速度慢，费用低，适合远距离</li>
<li><strong>并行传输</strong> ：速度快，费用高，适合近距离</li>
</ul>
<h2 id="23物理层下的传播媒体">2.3物理层下的传播媒体</h2>
<center><img src="https://s1.ax1x.com/2020/05/25/tpdlDI.png" alt="tpdlDI.png" border="0" /></center>
<p>双绞线：双绞线已成为局域网中的主流传输媒体</p>
<ul>
<li><strong>屏蔽双绞线 STP</strong> (Shielded Twisted Pair)</li>
<li><strong>无屏蔽双绞线 UTP</strong> (Unshielded Twisted Pair)</li>
</ul>
<p>同轴电缆：</p>
<ul>
<li><strong>细缆</strong>（适合短距离，安装容易，造价低）</li>
<li><strong>粗缆</strong>（适合较大局域网，布线距离长，可靠性好）</li>
</ul>
<p>光纤：光纤有很好的抗电磁干扰特性和很宽的频带，主要用在环形网中</p>
<ul>
<li><strong>多模光纤</strong>（用发光二极管，便宜，定向性较差）</li>
<li><strong>单模光纤</strong>（注入激光二极管，定向性好）</li>
</ul>
<p>非导向传输媒体：微波、红外线、激光、卫星通信</p>
<h2 id="24信道复用技术">2.4信道复用技术</h2>
<blockquote>
<p>这部分掌握码分复用计算即可</p>
</blockquote>
<ul>
<li>频分复用FDM (Frequency Division Multiplexing)：所有用户在同样的时间占用不同的频率带宽资源。</li>
<li>时分复用TDM(Time Division Multiplexing)则是将时间划分为一段段等长的时分复用帧（TDM 帧）。</li>
<li>统计时分复用 STDM(Statistic TDM)是改进的时分复用，明显地提高信道的利用率。</li>
<li>波分复用 WDM (Wavelength Division Multiplexing)：光的频分复用</li>
<li>码分复用 CDM (Code Division Multiplexing)常用的名词是码分多址 CDMA：有很强的抗干扰能力。</li>
</ul>
<p>码分多址的计算靠一个例题就基本会了：</p>
<center><img src="https://s1.ax1x.com/2020/05/25/tpdavj.png" alt="tpdavj.png" border="0" /></center>
<h1 id="三-数据链路层">三、数据链路层</h1>
<p>数据链路层使用的信道主要有以下两种类型：</p>
<ul>
<li>点对点信道</li>
<li>广播信道</li>
</ul>
<h2 id="31使用点对点信道的数据链路层">3.1使用点对点信道的数据链路层</h2>
<ul>
<li>
<p><strong>链路</strong>  ：从一个结点到相邻结点的一段物理线路</p>
</li>
<li>
<p><strong>数据链路</strong>  ：把实现这些协议的硬件和软件加载链路上<br>
现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。一般的适配器都包括了数据链路层和物理层这两层的功能。</p>
</li>
<li>
<p>三个基本问题：</p>
<ul>
<li><strong>封装成帧</strong><br>
就是在一段数据的前后分别添加首部（帧开始符SOH 01）和尾部（帧结束符EOT 04），然后就构成了一个帧。（数据部分&lt;=长度限制MTU）首部和尾部的一个重要作用就是进行帧定界。<br>
<strong>帧定界是分组交换的必然要求</strong></li>
<li><strong>透明传输</strong><br>
为了达到透明传输（即传输的数据部分不会因为包含SOH和EOT而出错），在数据中出现控制字符“SOH”或“EOT”的前面插入一个转义字符“ESC”(十六进制1B)<br>
<strong>透明传输避免消息符号与帧定界符号相混淆</strong></li>
<li><strong>差错检测</strong><br>
现实通信链路中比特在传输中会产生差错，传输错误的比特占比称为误码率BER，为了保证可靠性，通常通过循环冗余检验CRC来做差错检测。<br>
<strong>差错检测防止无效数据帧浪费后续路由上的传输和处理资源</strong></li>
</ul>
</li>
</ul>
<h2 id="32点对点协议ppp-p70">3.2点对点协议PPP P70</h2>
<ul>
<li>PPP协议的组成部分
<ul>
<li>一个将 IP 数据报封装到串行链路的方法</li>
<li>链路控制协议 LCP (Link Control Protocol)</li>
<li>网络控制协议 NCP (Network Control Protocol)</li>
</ul>
</li>
<li>PPP协议的帧格式</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpwVLn.png" alt="tpwVLn.png" border="0" /></center>
<p>首部：</p>
<ul>
<li>首部中的标志字段F(Flag)，规定为0x7E(符号0x表示它后面的字符是用十六进制表示的。十六进制的7E的二进制表示是01111110)，标志字段表示一个帧的开始。</li>
<li>首部中的地址字段A规定为0xFF(即11111111)。</li>
<li>首部中的控制字段C规定为0x03(即00000011)。</li>
<li>首部中的2字节的协议字段：
<ul>
<li>(1)当协议字段为0x0021时，PPP帧的信息字段就是IP数据报。</li>
<li>(2)当协议字段为0xC021时，PPP帧的信息字段就是PPP链路控制协议LCP的数据。</li>
<li>(3)当协议字段为0x8021时，PPP帧的信息字段就是网络层的控制数据。</li>
</ul>
</li>
</ul>
<p>尾部：</p>
<ul>
<li>尾部中的第一个字段(2个字节)是使用CRC的帧检验序列FCS。</li>
<li>尾部中的标志字段F(Flag)，规定为0x7E(符号0x表示它后面的字符是用十六进制表示的。十六进制的7E的二进制表示是01111110)，标志字段表示一个帧的结束。</li>
<li>透明传输的实现方法<br>
当信息字段中出现和标志字段一样的比特(0x7E)组合时，就必须采取一些措施使这种形式上和标志字段一样的比特组合不出现在信息字段中。
<ul>
<li>
<p><strong>字节填充</strong> ——PPP使用异步传输<br>
当 PPP 用在异步传输时，就使用一种特殊的字符填充法：将每一个 0x7E字节变为(0x7D, 0x5E)，0x7D转变成为(0x7D, 0x5D)。ASCII 码的控制字符（即数值小于 0x20 的字符），则在前面要加入0x7D，同时将该字符的编码加以改变。</p>
</li>
<li>
<p><strong>零比特填充</strong> ——PPP使用同步传输<br>
只要发现有5个连续的1，则立即填入一个0</p>
</li>
</ul>
</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpw4Sg.png" alt="tpw4Sg.png" border="0" /></center>
<ul>
<li>PPP 协议的工作状态：<br>
链路静止-建立物理层-链路建立-pc发LCP-NCP分配IP地址-链路打开，网络层建立。（释放时倒过来）</li>
</ul>
<h2 id="33使用广播信道的数据链路层-p76">3.3使用广播信道的数据链路层 P76</h2>
<p>广播信道是一种一对多的通信，局域网使用的就是广播信道</p>
<ul>
<li>
<p>局域网的数据链路层（局域网的数据链路层被拆分为了两个子层）</p>
<ul>
<li>逻辑链路控制LLC子层：与传输媒体无关</li>
<li>媒体接入控制MAC子层：和局域网都对LLC子层来说是透明的</li>
</ul>
</li>
<li>
<p>CSMA/CD 协议<br>
以太网采用CSMA/CD协议的方式来协调总线上各计算机的工作。在使用CSMA/CD协议的时候，一个站不可能同时进行发送和接收，因此使用CSMA/CD协议的以太网不可能进行全双工通信而只能进行双向交替通信（半双工）。</p>
</li>
</ul>
<p>CSMA/CD是<strong>载波监听多点接入/碰撞检测</strong>（Carrier Sense Multiple Access with Collision Detection）的缩写，下面是CSMA/CD协议的要点：</p>
<ul>
<li><strong>“多点接入”</strong> 就是计算机以多点接入（动态媒体接入控制）的方式连接在一根总线上。</li>
<li><strong>“载波监听”</strong> 就是”发送前先监听”，即每一个站在发送数据前先要检测一下总线是否有其他站在发送数据，如有则暂时不要发送数据，要等到信道为空闲。</li>
<li><strong>“碰撞检测”</strong> 就是“边发送边监听”，即适配器边发送数据边检测信道上的信号电压的变化情况。当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送。</li>
</ul>
<p>把总线上的单程端到端传播时延记为τ，A 发送数据后，最迟要经过2τ才能知道自己发送的数据和其他站发送的数据有没有发生碰撞。</p>
<h2 id="34mac地址">3.4MAC地址</h2>
<ul>
<li>
<p>“MAC地址”又叫做硬件地址或物理地址，实际上就是适配器地址或适配器标识符EUI-48。高位24位：厂家，低位24位由厂家自行指派</p>
</li>
<li>
<p>MAC帧的格式<br>
常用的以太网MAC帧格式有两种标准 ： DIX Ethernet V2 标准IEEE 的 802.3 标准。V2使用较多，如图：</p>
</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tp03h8.png" alt="tp03h8.png" border="0" /></center>
<p>以太网V2的MAC帧较为简单，有五个字段组成。</p>
<p>前两个字段分别为6字长的目标地址和源地址字段。第三个字段是2字节的类型字段，用来标志上一层使用的是什么协议，以便把收到的MAC帧的数据上交给上一层的这个协议。后面数据字段46~1500字节，FCS字段4个字节。</p>
<h2 id="35扩展的以太网">3.5扩展的以太网</h2>
<ul>
<li>在物理层扩展—集线器 P91<br>
现在，双绞线以太网成为以太网的主流类型，扩展主机和集线器之间的距离的一种简单方法就是使用光纤(通常是一对光纤)和一对光纤调制解调器。</li>
</ul>
<p>光纤调制解调器的作用，是进行电信号和光信号的转换。</p>
<ul>
<li>在数据链路层扩展—网桥（自学习算法）P94<br>
<strong>注：在数据链路层扩展以太网要使用网桥</strong></li>
</ul>
<p>网桥工作在数据链路层，它根据MAC帧的目的地址对收到的帧进行转发或过滤。当网桥收到一个帧时，并不是向所有的接口转发这个帧，而是检查此帧的目的MAC地址，然后再确定将该帧转发到哪一个接口，或者是把它丢弃(即过滤)。</p>
<blockquote>
<p>具体可以参考这篇博客：http://blog.csdn.net/cainv89/article/details/50651489</p>
</blockquote>
<ul>
<li>虚拟局域网-交换机P98<br>
多接口网桥即交换式集线器常称为以太网交换机。利用以太网交换机可以很方便地 实现虚拟局域网，虚拟局域网协议允许在以太网的帧格式中插入一个 4 字节的标识符，称为 VLAN 标记。</li>
</ul>
<h1 id="四-网络层">四、网络层</h1>
<h2 id="41网际协议ip">4.1网际协议IP</h2>
<p>网际协议IP是TCP/IP体系中两个最重要的协议之一，也是最重要的因特网标准协议之一。与IP协议配套是用的四个协议：</p>
<ol>
<li><strong>地址解析协议ARP</strong> ：是解决同一个局域网上的主机或路由器的IP地址和硬件地址的映射问题。</li>
<li><strong>逆地址解析协议RARP</strong> ：是解决同一个局域网上的主机或路由器的硬件地址和IP地址的映射问题。</li>
<li><strong>网际控制报文协议ICMP</strong> ：提供差错报告和询问报文，以提高IP数据交付成功的机会</li>
<li><strong>网际组管理协议IGMP</strong> ：用于探寻、转发本局域网内的组成员关系。</li>
</ol>
<h3 id="411虚拟互连网络">4.1.1虚拟互连网络</h3>
<p>因为没有一种单一的网络能够适应所有的用户需求，所以网络互连也变得困难，所以需要一些中间设备：</p>
<ul>
<li>物理层中间设备：转发器(repeater)</li>
<li>数据链路层中间设备：网桥或桥接器(bridge)</li>
<li>网络层中间设备：路由器(router)</li>
<li>网络层以上的中间设备：网关(gateway)</li>
</ul>
<blockquote>
<p>具体各层的设备说明可以看这篇博客“网络设备”部分：http://blog.csdn.net/hushhw/article/details/78489470</p>
</blockquote>
<h3 id="412分类的ip地址-p113">4.1.2分类的IP地址 P113</h3>
<p><strong>IP 地址</strong> 就是给每个连接在因特网上的主机（或路由器）分配一个在全世界范围是唯一的 32 位的标识符。由因特网名字与号码指派公司ICANN进行分配。</p>
<p>IP地址编制方法的三个阶段：</p>
<ul>
<li>分类的IP地址</li>
<li>子网的划分</li>
<li>构成超网</li>
</ul>
<p>每一类地址都由 <strong>网络号</strong> net-id和 <strong>主机号</strong> host-id组成</p>
<p><strong>主机号中全0表示网络地址，全1表示广播地址</strong></p>
<center><img src="https://s1.ax1x.com/2020/05/25/tpBzZR.jpg" alt="tpBzZR.jpg" border="0" /></center>
<center><img src="https://s1.ax1x.com/2020/05/25/tpDCi6.jpg" alt="tpDCi6.jpg" border="0" /></center>
<ul>
<li>A类
<ul>
<li>由1字节的网络地址和3字节主机地址组成</li>
<li>网络地址的最高位必须是“0“，可指派的网络数为128-2，减2的原因是0.0.0.0对应“本网络”，另外一个是127.0.0.1是本地软件的回环地址，用于测试自己电脑IP地址是否可用。</li>
<li>地址范围1.0.0.0到126.255.255.255</li>
<li>最大主机数为2563-2=16777214台，减2的原因是全0的主机号字段代表该IP地址是”本主机“，全1表示”所有的“，表示该网络上的所有主机</li>
</ul>
</li>
<li>B类
<ul>
<li>由2字节的网络地址和2字节主机地址组成</li>
<li>网络地址的最高位必须是“10”，可指派的网络数为 214 -1，因为最高位为10，所以不存在全0全1的情况，但是B类网络地址128.0.0.0是不指派的，可指派最小网络地址是128.1.0.0</li>
<li>地址范围128.0.0.0-191.255.255.255</li>
<li>最大主机数为2562-2=65534台，减2同样是全0全1情况。</li>
</ul>
</li>
<li>C类
<ul>
<li>由3字节的网络地址和1字节主机地址组成</li>
<li>网络地址的最高位必须是“110”，可指派的网络数为221-1，192.0.0.0不指派，最小可指派网络地址是192.0.1.0</li>
<li>地址范围192.0.0.0-223.255.255.255</li>
<li>最大主机数为256-2=254台，减2同样是全0全1情况。</li>
</ul>
</li>
<li>D类是多播地址，“lll0”开始</li>
<li>E类地址保留为今后使用，“llll0”开头</li>
</ul>
<h3 id="413ip地址与硬件地址">4.1.3IP地址与硬件地址</h3>
<p><strong>硬件地址</strong> 是数据链路层和物理层使用的地址</p>
<p><strong>IP地址</strong> 是网络层和以上各层使用的地址，是一种逻辑地址</p>
<p>IP地址放在IP数据报的首部，而硬件地址放在MAC帧的首部。当数据报放入数据链路层的MAC帧中后，整个IP数据报就成为MAC帧的数据，因而在数据链路层看不见数据报的IP地址。</p>
<h3 id="414地址解析协议arp">4.1.4地址解析协议ARP</h3>
<p>ARP是解决同一个<strong>局域网</strong> 上的主机或路由器的 IP 地址和硬件地址的映射问题。</p>
<p>每一个主机都设有一个ARP高速缓存(ARP cache)，里面有所在的局域网上的各主机和路由器的 IP 地址到硬件地址的映射表。</p>
<p>如果所要找的主机和源主机不在同一个局域网上，那么就要通过 ARP 找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络。</p>
<h3 id="415-ip数据报">4.1.5 IP数据报</h3>
<ul>
<li>IP数据报格式<br>
一个IP数据报由首部（20 字节+可选字段）和数据两部分组成</li>
</ul>
<center><img src="https://s1.ax1x.com/2020/05/25/tpDLkt.png" alt="tpDLkt.png" border="0" /></center>
<center><img src="https://s1.ax1x.com/2020/05/25/tpDvp8.png" alt="tpDvp8.png" border="0" /></center>
<p>分组转发<br>
- (1) 从数据报的首部提取目的主机的 IP 地址 D, 得出目的网络地址为 N。<br>
- (2) 若网络 N 与此路由器直接相连，则把数据报直接交付目的主机 D；否则是间接交付，执行(3)。<br>
- (3) 若路由表中有目的地址为 D 的特定主机路由，则把数据报传送给路由表中所指明的下一跳路由器；否则，执行(4)。<br>
- (4) 若路由表中有到达网络 N 的路由，则把数据报传送给路由表指明的下一跳路由器；否则，执行(5)。<br>
- (5) 若路由表中有一个默认路由，则把数据报传送给路由表中所指明的默认路由器；否则，执行(6)<br>
- (6) 报告转发分组出错。</p>
<h2 id="42划分子网-p128">4.2划分子网 P128</h2>
<ul>
<li>两级IP地址缺陷：
<ul>
<li>IP 地址空间的利用率有时很低。</li>
<li>给每一个物理网络分配一个网络号会使路由表变得太大因而使网络性能变坏。</li>
<li>两级的 IP 地址不够灵活</li>
</ul>
</li>
<li>子网划分的基本思路：
<ul>
<li>划分子网纯属一个单位内部的事情，单位对外仍然表现为没有划分子网的网络。</li>
<li>划分子网的方法是从主机号借用若干个位作为子网号。</li>
<li>路由器在收到IP数据报后，按目标网络号和子网号定位目标子网</li>
</ul>
</li>
<li>子网掩码<br>
子网掩码是一个网络或一个子网的重要属性</li>
</ul>
<blockquote>
<p>这里要会已知IP地址，子网掩码，求网络地址</p>
</blockquote>
<h2 id="43构造超网无分类编址cidr">4.3构造超网（无分类编址CIDR）</h2>
<ul>
<li>
<p><strong>CIDR（无分类域间路由选择）</strong> 的主要特点：</p>
<ul>
<li>CIDR消除了传统的A、B、C类地址以及划分子网的概念，用网络前缀代替网络号和子网号，后面的部分指明主机。因此，CIDR使IP地址从三级编址(使用子网掩码)，又回到了两级编址，但这已是无分类的两级编址。</li>
<li>CIDR把网络前缀相同的连续的IP地址组成一个”CIDR地址块”只要知道CIDR地址块中的任何一个地址，就可以知道这地址块的起始地址(即最小地址)和最大地址，以及地址块中的地址数。</li>
</ul>
</li>
<li>
<p>地址掩码：是一连串的1和0组成，而1的个数救赎网络前缀长度。在斜线记法中。斜线后面的数字就是地址掩码中1的个数。</p>
</li>
<li>
<p>构成超网：由于一个CIDR地址块中含有很多地址，所以在路由表中就利用CIDR地址块来查找目标网络，这种地址的聚合常称为路由聚合，也称构成超网。</p>
</li>
</ul>
<h2 id="44网际控制报文协议icmp">4.4网际控制报文协议ICMP</h2>
<p>为了更有效地转发IP数据报和提高交付成功的机会，在网际层使用了ICMP，ICMP允许主机或路由器报告差错情况和提供有关异常情况的报告。</p>
<ul>
<li>ICMP报文的种类
<ul>
<li>ICMP差错报告报文</li>
<li>ICMP询问报文</li>
</ul>
</li>
<li>ICMP 差错报告报文共有 5 种：
<ul>
<li>终点不可达</li>
<li>源点抑制(Source quench)</li>
<li>时间超过</li>
<li>参数问题</li>
<li>改变路由（重定向）(Redirect)</li>
</ul>
</li>
<li>ICMP 询问报文有两种：
<ul>
<li>回送请求和回答报文</li>
<li>时间戳请求和回答报文</li>
</ul>
</li>
</ul>
<h2 id="45路由选择协议">4.5路由选择协议</h2>
<ul>
<li>两大类路由选择协议：
<ul>
<li>内部网关协议 IGP：一个自治系统内部使用的路由选择协议。有多种协议，如 RIP 和OSPF 协议。</li>
<li>外部网关协议EGP：一个自治系统的边界，将路由选择信息传递到另一个自治系统中。目前使用的就是BGP</li>
</ul>
</li>
</ul>
<p>RIP协议的优缺点：<br>
- RIP 存在的一个问题是当网络出现故障时，要经过比较长的时间才能将此信息传送到所有的路由器。<br>
- RIP 协议最大的优点就是实现简单，开销较小。<br>
- RIP 限制了网络的规模，它能使用的最大距离为 15（16 表示不可达）。<br>
- 路由器之间交换的路由信息是路由器中的完整路由表，因而随着网络规模的扩大，开销也就增加。</p>
<p>RIP是一种分布式的基于距离向量的路由选择协议，其主要特点：</p>
<p>（1）仅和相邻路由器交换信息。</p>
<p>（3）按固定的时间间隔交换路由信息，例如，每隔30秒。</p>
<p>OSPF最主要的特征就是使用分布式的链路状态协议，其主要特点：</p>
<p>（1）使用洪泛法向本自治系统中所有路由器发送信息。</p>
<p>（2）发送的信息是与本路由器相邻的所有路由器的链路状态。</p>
<p>（3）只有当链路状态发生变化时，路由器才用洪泛法向所有路由器发送此信息。</p>
<p>BGP是不同自治系统的路由器之间交换路由信息的协议，它采用路径向量路由选择协议，其主要特点：</p>
<p>（2）自治系统AS之间的路由选择必须考虑有关策略。</p>
<p>（3）BGP只能力求寻找一条能够到达目的网络且比较好的路由，而并非要寻找一条最佳路由。</p>
<h1 id="五-运输层">五、运输层</h1>
<h2 id="51运输层协议概述">5.1运输层协议概述</h2>
<ul>
<li>运输层功能
<ul>
<li>运输层为应用进程之间提供端到端的逻辑通信（但网络层是为主机之间提供逻辑通信）</li>
<li>运输层还要对收到的报文进行差错检测</li>
<li>运输层需要有两种不同的运输协议，即面向连接的 <strong>TCP</strong> 和无连接的 <strong>UDP</strong></li>
</ul>
</li>
<li>运输层的两个主要协议</li>
</ul>
<p>TCP/IP 的运输层有两个不同的协议：<br>
- <strong>用户数据报协议 UDP</strong> (User Datagram Protocol)<br>
- <strong>传输控制协议 TCP</strong> (Transmission Control Protocol)</p>
<p>UDP 在传送数据之前不需要先建立连接。对方的运输层在收到 UDP 报文后，不需要给出任何确认。虽然 UDP 不提供可靠交付，但在某些情况下 UDP 是一种最有效的工作方式。</p>
<p>TCP 则提供面向连接的服务。TCP 不提供广播或多播服务。由于 TCP 要提供可靠的、面向连接的运输服务，因此不可避免地增加了许多的开销。这不仅使协议数据单元的首部增大很多，还要占用许多的处理机资源。</p>
<center><img src="https://s1.ax1x.com/2020/05/27/tkEQ41.jpg" alt="tkEQ41.jpg" border="0" /></center>
<ul>
<li>运输层的端口</li>
</ul>
<p>TCP/IP的运输层的端口用一个 16 位端口号进行标志</p>
<p><strong>端口号只具备本地意义，即端口号只是为了标志本计算机应用层中的各进程</strong>。</p>
<p>客户发起通讯请求时，必须先知道对方服务器的IP地址和端口号，运输层的端口号分为下面三大类：</p>
<ul>
<li>熟知端口号，数值一般为 0~1023。</li>
</ul>
<pre><code class="language-html">一些常用的数值端口号：
FTP 21
LELNET 23
SMTP 25
DNS 53
TFTP 69
HTTP 80
SNMP 161
SNMP(trap) 162
</code></pre>
<ul>
<li>登记端口号，数值为1024~49151，为没有熟知端口号的应用程序使用的。</li>
<li>客户端口号或短暂端口号，数值为49152~65535，留给客户进程选择暂时使用。</li>
</ul>
<h2 id="52用户数据报协议-udp">5.2用户数据报协议 UDP</h2>
<ul>
<li>UDP的主要特点：
<ul>
<li>UDP 是无连接的，即发送数据之前不需要建立连接。</li>
<li>UDP 使用尽最大努力交付，即不保证可靠交付，同时也不使用拥塞控制</li>
<li>UDP 是面向报文的</li>
<li>UDP 没有拥塞控制，很适合多媒体通信的要求。</li>
<li>UDP 支持一对一、一对多、多对一和多对多的交互通信</li>
<li>UDP 的首部开销小，只有 8 个字节</li>
</ul>
</li>
</ul>
<h2 id="53传输控制协议-tcp">5.3传输控制协议 TCP</h2>
<ul>
<li>TCP的主要特点：
<ul>
<li>TCP 是面向连接的运输层协议</li>
<li>每一条 TCP 连接只能有两个端点(endpoint)，每一条 TCP 连接只能是点对点的（一对一）</li>
<li>TCP 提供可靠交付的服务</li>
<li>TCP 提供全双工通信</li>
<li>面向字节流</li>
</ul>
</li>
</ul>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
                <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" onclick="alert('https://qzone.qq.com/')">
            <i class="ri-qq-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-green-500 hover:bg-green-100 dark:hover:bg-gray-600 inline-flex" onclick="alert('其实并没有用|。|')">
            <i class="ri-wechat-line"></i>
          </div>
        </div>
      </div>
      
      
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-10 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <blockquote>
        <div class="author">
        <div style="float:left;margin-right:5px;">
        <img src="https://q.qlogo.cn/g?b=qq&nk=603329354&s=100" alt="小白" width="70" height="70" /></div>
        <strong>本文作者：</strong><a target="_blank" href="https://me.sqdxwz.com">王荣胜</a>
        ｜「<a href="http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=603329354@qq.com" target="_blank" title="联系邮箱">邮箱</a> 」| 「<a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=603329354&site=qq&menu=yes">QQ</a>」 | 「<a target="_blank" href="//shang.qq.com/wpa/qunwpa?idkey=916d52073f0d4a4ab75c94f19b0d64b10d95f70d0621c833bb632ac1936e3256">QQ群</a>」 <br>
        <strong>文章出处：</strong><a href="https://sqdxwz.top">https://sqdxwz.top/</a></br>
        <strong>版权声明：</strong>本文章采用「<a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank">知识共享署名-相同方式共享 4.0 国际许可协议</a>」许可。
        </blockquote>

      </div>
      
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-10 px-4 md:px-8 pb-8 animated fadeIn mb-8">
      <iframe src="https://www.lovestu.com/api/project/cnmapyinqing/obj.php" height="500" frameborder="no" border="0" width="100%"> 
      </iframe>
      </div>

      

      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>

<!--彩带-->
<script>
    (function(name, factory) {
        if (typeof window === "object") {
            window[name] = factory()
        }
    })("Ribbons", function() {
        var _w = window,
            _b = document.body,
            _d = document.documentElement;
        var random = function() {
                if (arguments.length === 1) {
                    if (Array.isArray(arguments[0])) {
                        var index = Math.round(random(0, arguments[0].length - 1));
                        return arguments[0][index]
                    }
                    return random(0, arguments[0])
                } else if (arguments.length === 2) {
                    return Math.random() * (arguments[1] - arguments[0]) + arguments[0]
                }
                return 0
            };
        var screenInfo = function(e) {
                var width = Math.max(0, _w.innerWidth || _d.clientWidth || _b.clientWidth || 0),
                    height = Math.max(0, _w.innerHeight || _d.clientHeight || _b.clientHeight || 0),
                    scrollx = Math.max(0, _w.pageXOffset || _d.scrollLeft || _b.scrollLeft || 0) - (_d.clientLeft || 0),
                    scrolly = Math.max(0, _w.pageYOffset || _d.scrollTop || _b.scrollTop || 0) - (_d.clientTop || 0);
                return {
                    width: width,
                    height: height,
                    ratio: width / height,
                    centerx: width / 2,
                    centery: height / 2,
                    scrollx: scrollx,
                    scrolly: scrolly
                }
            };
        var mouseInfo = function(e) {
                var screen = screenInfo(e),
                    mousex = e ? Math.max(0, e.pageX || e.clientX || 0) : 0,
                    mousey = e ? Math.max(0, e.pageY || e.clientY || 0) : 0;
                return {
                    mousex: mousex,
                    mousey: mousey,
                    centerx: mousex - screen.width / 2,
                    centery: mousey - screen.height / 2
                }
            };
        var Point = function(x, y) {
                this.x = 0;
                this.y = 0;
                this.set(x, y)
            };
        Point.prototype = {
            constructor: Point,
            set: function(x, y) {
                this.x = x || 0;
                this.y = y || 0
            },
            copy: function(point) {
                this.x = point.x || 0;
                this.y = point.y || 0;
                return this
            },
            multiply: function(x, y) {
                this.x *= x || 1;
                this.y *= y || 1;
                return this
            },
            divide: function(x, y) {
                this.x /= x || 1;
                this.y /= y || 1;
                return this
            },
            add: function(x, y) {
                this.x += x || 0;
                this.y += y || 0;
                return this
            },
            subtract: function(x, y) {
                this.x -= x || 0;
                this.y -= y || 0;
                return this
            },
            clampX: function(min, max) {
                this.x = Math.max(min, Math.min(this.x, max));
                return this
            },
            clampY: function(min, max) {
                this.y = Math.max(min, Math.min(this.y, max));
                return this
            },
            flipX: function() {
                this.x *= -1;
                return this
            },
            flipY: function() {
                this.y *= -1;
                return this
            }
        };
        var Factory = function(options) {
                this._canvas = null;
                this._context = null;
                this._sto = null;
                this._width = 0;
                this._height = 0;
                this._scroll = 0;
                this._ribbons = [];
                this._options = {
                    colorSaturation: "80%",
                    colorBrightness: "60%",
                    colorAlpha: 0.65,
                    colorCycleSpeed: 6,
                    verticalPosition: "center",
                    horizontalSpeed: 150,
                    ribbonCount: 5,
                    strokeSize: 5,
                    parallaxAmount: -0.5,
                    animateSections: true
                };
                this._onDraw = this._onDraw.bind(this);
                this._onResize = this._onResize.bind(this);
                this._onScroll = this._onScroll.bind(this);
                this.setOptions(options);
                this.init()
            };
        Factory.prototype = {
            constructor: Factory,
            setOptions: function(options) {
                if (typeof options === "object") {
                    for (var key in options) {
                        if (options.hasOwnProperty(key)) {
                            this._options[key] = options[key]
                        }
                    }
                }
            },
            init: function() {
                try {
                    this._canvas = document.createElement("canvas");
                    this._canvas.style["display"] = "block";
                    this._canvas.style["position"] = "fixed";
                    this._canvas.style["margin"] = "0";
                    this._canvas.style["padding"] = "0";
                    this._canvas.style["border"] = "0";
                    this._canvas.style["outline"] = "0";
                    this._canvas.style["left"] = "0";
                    this._canvas.style["top"] = "0";
                    this._canvas.style["width"] = "100%";
                    this._canvas.style["height"] = "100%";
                    this._canvas.style["z-index"] = "-1";
                    this._onResize();
                    this._context = this._canvas.getContext("2d");
                    this._context.clearRect(0, 0, this._width, this._height);
                    this._context.globalAlpha = this._options.colorAlpha;
                    window.addEventListener("resize", this._onResize);
                    window.addEventListener("scroll", this._onScroll);
                    document.body.appendChild(this._canvas)
                } catch (e) {
                    console.warn("Canvas Context Error: " + e.toString());
                    return
                }
                this._onDraw()
            },
            addRibbon: function() {
                var dir = Math.round(random(1, 9)) > 5 ? "right" : "left",
                    stop = 1000,
                    hide = 200,
                    min = 0 - hide,
                    max = this._width + hide,
                    movex = 0,
                    movey = 0,
                    startx = dir === "right" ? min : max,
                    starty = Math.round(random(0, this._height));
                if (/^(top|min)$/i.test(this._options.verticalPosition)) {
                    starty = 0 + hide
                } else if (/^(middle|center)$/i.test(this._options.verticalPosition)) {
                    starty = this._height / 2
                } else if (/^(bottom|max)$/i.test(this._options.verticalPosition)) {
                    starty = this._height - hide
                }
                var ribbon = [],
                    point1 = new Point(startx, starty),
                    point2 = new Point(startx, starty),
                    point3 = null,
                    color = Math.round(random(0, 360)),
                    delay = 0;
                while (true) {
                    if (stop <= 0) break;
                    stop--;
                    movex = Math.round((Math.random() * 1 - 0.2) * this._options.horizontalSpeed);
                    movey = Math.round((Math.random() * 1 - 0.5) * (this._height * 0.25));
                    point3 = new Point();
                    point3.copy(point2);
                    if (dir === "right") {
                        point3.add(movex, movey);
                        if (point2.x >= max) break
                    } else if (dir === "left") {
                        point3.subtract(movex, movey);
                        if (point2.x <= min) break
                    }
                    ribbon.push({
                        point1: new Point(point1.x, point1.y),
                        point2: new Point(point2.x, point2.y),
                        point3: point3,
                        color: color,
                        delay: delay,
                        dir: dir,
                        alpha: 0,
                        phase: 0
                    });
                    point1.copy(point2);
                    point2.copy(point3);
                    delay += 4;
                    color += this._options.colorCycleSpeed
                }
                this._ribbons.push(ribbon)
            },
            _drawRibbonSection: function(section) {
                if (section) {
                    if (section.phase >= 1 && section.alpha <= 0) {
                        return true
                    }
                    if (section.delay <= 0) {
                        section.phase += 0.02;
                        section.alpha = Math.sin(section.phase) * 1;
                        section.alpha = section.alpha <= 0 ? 0 : section.alpha;
                        section.alpha = section.alpha >= 1 ? 1 : section.alpha;
                        if (this._options.animateSections) {
                            var mod = Math.sin(1 + section.phase * Math.PI / 2) * 0.1;
                            if (section.dir === "right") {
                                section.point1.add(mod, 0);
                                section.point2.add(mod, 0);
                                section.point3.add(mod, 0)
                            } else {
                                section.point1.subtract(mod, 0);
                                section.point2.subtract(mod, 0);
                                section.point3.subtract(mod, 0)
                            }
                            section.point1.add(0, mod);
                            section.point2.add(0, mod);
                            section.point3.add(0, mod)
                        }
                    } else {
                        section.delay -= 0.5
                    }
                    var s = this._options.colorSaturation,
                        l = this._options.colorBrightness,
                        c = "hsla(" + section.color + ", " + s + ", " + l + ", " + section.alpha + " )";
                    this._context.save();
                    if (this._options.parallaxAmount !== 0) {
                        this._context.translate(0, this._scroll * this._options.parallaxAmount)
                    }
                    this._context.beginPath();
                    this._context.moveTo(section.point1.x, section.point1.y);
                    this._context.lineTo(section.point2.x, section.point2.y);
                    this._context.lineTo(section.point3.x, section.point3.y);
                    this._context.fillStyle = c;
                    this._context.fill();
                    if (this._options.strokeSize > 0) {
                        this._context.lineWidth = this._options.strokeSize;
                        this._context.strokeStyle = c;
                        this._context.lineCap = "round";
                        this._context.stroke()
                    }
                    this._context.restore()
                }
                return false
            },
            _onDraw: function() {
                for (var i = 0, t = this._ribbons.length; i < t; ++i) {
                    if (!this._ribbons[i]) {
                        this._ribbons.splice(i, 1)
                    }
                }
                this._context.clearRect(0, 0, this._width, this._height);
                for (var a = 0; a < this._ribbons.length; ++a) {
                    var ribbon = this._ribbons[a],
                        numSections = ribbon.length,
                        numDone = 0;
                    for (var b = 0; b < numSections; ++b) {
                        if (this._drawRibbonSection(ribbon[b])) {
                            numDone++
                        }
                    }
                    if (numDone >= numSections) {
                        this._ribbons[a] = null
                    }
                }
                if (this._ribbons.length < this._options.ribbonCount) {
                    this.addRibbon()
                }
                requestAnimationFrame(this._onDraw)
            },
            _onResize: function(e) {
                var screen = screenInfo(e);
                this._width = screen.width;
                this._height = screen.height;
                if (this._canvas) {
                    this._canvas.width = this._width;
                    this._canvas.height = this._height;
                    if (this._context) {
                        this._context.globalAlpha = this._options.colorAlpha
                    }
                }
            },
            _onScroll: function(e) {
                var screen = screenInfo(e);
                this._scroll = screen.scrolly
            }
        };
        return Factory
    });
    new Ribbons({
        colorSaturation: "60%",
        colorBrightness: "50%",
        colorAlpha: 0.5,
        colorCycleSpeed: 5,
        verticalPosition: "random",
        horizontalSpeed: 200,
        ribbonCount: 3,
        strokeSize: 0,
        parallaxAmount: -0.2,
        animateSections: true
    });
</script>

<!--语句特效>
<script type="text/javascript"> 
/* 鼠标特效 */
var a_idx = 0; 
jQuery(document).ready(function($) { 
    $("body").click(function(e) { 
        var a = new Array("富强", "民主", "文明", "和谐", "自由", "平等", "公正" ,"法治", "爱国", "敬业", "诚信", "友善"); 
        var $i = $("<span/>").text(a[a_idx]); 
        a_idx = (a_idx + 1) % a.length; 
        var x = e.pageX, 
        y = e.pageY; 
        $i.css({ 
            "z-index": 999999999999999999999999999999999999999999999999999999999999999999999, 
            "top": y - 20, 
            "left": x, 
            "position": "absolute", 
            "font-weight": "bold", 
            "color": "#ff6651" 
        }); 
        $("body").append($i); 
        $i.animate({ 
            "top": y - 180, 
            "opacity": 0 
        }, 
        1500, 
        function() { 
            $i.remove(); 
        }); 
    }); 
}); 
</script-->


<!--小裙子-->
<center><img src="https://cdn.jsdelivr.net/gh/drew233/cdn//20191003172815.webp"></center>


<!-- Go to www.addthis.com/dashboard to customize your tools -->
<!--script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5e8efce4fe22f1d6"></script-->


<!--顶部彩条-->
<!--style type="text/css"> #top-img {
    background: url(https://ae01.alicdn.com/kf/H640f6d67443943c681b69169525baf49B.gif);
    height:4px;
    top:0px;
    position: fixed;
    width:100%;
    Z-index:9999;
} </style>
 
<div id="top-img"></div-->


<!--鼠标烟花>
<script src="https://blog-static.cnblogs.com/files/zouwangblog/mouse-click.js"></script>
<canvas width="1777" height="841" style="position: fixed; left: 0px; top: 0px; z-index: 2147483647; pointer-events: none;"></canvas-->

<!--音乐>
<link rel="stylesheet" href="https://blog-static.cnblogs.com/files/zouwangblog/APlayer.min.css">
<script src="https://blog-static.cnblogs.com/files/zouwangblog/APlayer.min.js"></script>
<script src="https://blog-static.cnblogs.com/files/zouwangblog/Meting.min.js"></script>
<div id="player" class="aplayer aplayer-withlist aplayer-fixed" data-id="2878443703" data-server="netease" data-type="playlist" data-order="random" data-fixed="true" data-listfolded="true" data-theme="#2D8CF0"></div-->

<!--打赏-->
<!--script src="http://static.tctip.com/tctip-1.0.0.min.js"></script>
<script>  
  new tctip({
    top: '40%',
    button: {
      id: 6,
      type: 'dashang',
    },
    list: [
      {
        type: 'alipay',
        qrImg: 'https://s1.ax1x.com/2020/04/10/GTUyRI.jpg'
      }, 
      {
        type: 'wechat',
        qrImg: 'https://s1.ax1x.com/2020/04/10/GTU6zt.jpg'
      }
    ]
  }).init()
</script-->

<!--权重提高-->
<!--script>
if (getCookie("baidu_tc")!="1"){
var array = new Array('在河南理工大学实验班有多爽？','河南理工大学 王荣胜');
document.write('<a href="http://www.baidu.com/s?ie=UTF-8&wd=' + encodeURIComponent(array[Math.floor(Math.random()*(array.length))]) + '" target="_blank" style="position: absolute; z-index: 9999999999; opacity: 0.1;top: 0px; left: 0px; width: 100%; height: '+document.body.offsetHeight+'px; background-color: rgb(255, 255, 255);" id="baidu_tc" onclick="baidu_tc();"></a>');
function baidu_tc(){
document.getElementById("baidu_tc").style.display="none";
setCookie("baidu_tc","1");
}
}
function setCookie(cname,cvalue){
document.cookie = cname + "=" + cvalue + "; path=/";
}
function getCookie(cname){
var name = cname + "=";
var ca = document.cookie.split(';');
for(var i=0; i<ca.length; i++) {
var c = ca[i].trim();
if (c.indexOf(name)==0){
return c.substring(name.length,c.length);
}
}
return "";
}
</script-->

<!--音乐播放-->
<script src="//lib.baomitu.com/jquery/3.3.1/jquery.min.js"></script>
<script src="https://player.lmih.cn/player/js/player.js" id="myhk" key="158789588329" m="1"></script>

<!--看板娘-->
<!--script src="https://api.itggg.cn/live2d/autoload.js"></script-->

  Powered by <a href="https://sqdxwz.com" target="_blank">王荣胜</a> | <script type="text/javascript" src="https://s4.cnzz.com/z_stat.php?id=1278765440&web_id=1278765440"></script> | <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
<script>
    var now = new Date(); 
    function createtime() { 
        var grt= new Date("12/10/2019 17:38:00");//在此处修改你的建站时间
        now.setTime(now.getTime()+250); 
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days); 
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours); 
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum); 
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;} 
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); 
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;} 
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 "; 
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒"; 
    } 
setInterval("createtime()",250);
</script>

<center>
         <a href="https://www.google.com/search?sxsrf=ALeKk03X4Ce93V9_gc_WnhP5Ecp-bMkrnQ%3A1586508797111&amp;ei=_TOQXrqqBon-9AP4i6z4Ag&amp;q=site%3Asqdxwz.top&amp;oq=site%3A&amp;gs_lcp=CgZwc3ktYWIQAxgAMgQIIxAnMgQIIxAnMgQIIxAnMgUIABDLATICCAAyBQgAEMsBMgUIABDLATIFCAAQywEyAggAMgUIABDLAUoYCBcSFDItODA0ZzBnMTM5Mmc3MDhnNDA4Sg8IGBILMi0xZzBnMWcxZzJQ-yBY_Ddghz5oAXAAeAGAAewKiAGGNZIBCzAuMS41LTIuNC4ymAEAoAEBqgEHZ3dzLXdpeg&amp;sclient=psy-ab" target="_blank" alt="Google" rel="nofollow"><img src="https://www.zouwang.vip/wp-content/themes/Sakura/images/link/Google.svg" alt="Google" style="height: 1.7em; max-height: 1.8em;padding-bottom: 0px;display: inline-block;"></a>&nbsp;&nbsp;&nbsp;&nbsp;

         <a href="https://github.com/WangRongsheng" target="_blank" alt="Server provider" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/xiangshu233/cdn@3.8/img/logo/GitHub.png" alt="Server provider" style="height: 2.5em; max-height: 2.5em;padding-bottom: 0px;margin-bottom: -0.1em;display: inline-block;"></a>&nbsp;&nbsp;&nbsp;&nbsp;

         <a href="https://www.jsdelivr.com" target="_blank" alt="Free CDN" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/xiangshu233/cdn@3.8/img/logo/JsDelivr_Logo.svg" alt="jsDelivr" style="margin-bottom: -0.1em; height: 2em; max-height: 2em;padding-bottom: 0px;display: inline-block;"></a>&nbsp;&nbsp;&nbsp;&nbsp;
  
</center>

<center><span id="jinrishici-sentence">正在加载今日诗词....</span>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script></center>
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80-%E7%BB%AA%E8%AE%BA">一、绪论</a>
<ul>
<li><a href="#11%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C">1.1计算机网络</a></li>
<li><a href="#12%E5%9B%A0%E7%89%B9%E7%BD%91%E6%A6%82%E8%BF%B0">1.2因特网概述</a></li>
<li><a href="#13%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E7%BB%84%E6%88%90p8">1.3互联网的组成P8</a></li>
<li><a href="#14%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%B1%BB%E5%88%ABp17">1.4计算机网络的类别P17</a></li>
<li><a href="#15%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84p25">1.5计算机网络的体系结构P25</a></li>
</ul>
</li>
<li><a href="#%E4%BA%8C-%E7%89%A9%E7%90%86%E5%B1%82">二、物理层</a>
<ul>
<li><a href="#21%E7%89%A9%E7%90%86%E5%B1%82%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5">2.1物理层基础概念</a></li>
<li><a href="#22%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">2.2数据通信基础知识</a></li>
<li><a href="#23%E7%89%A9%E7%90%86%E5%B1%82%E4%B8%8B%E7%9A%84%E4%BC%A0%E6%92%AD%E5%AA%92%E4%BD%93">2.3物理层下的传播媒体</a></li>
<li><a href="#24%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8%E6%8A%80%E6%9C%AF">2.4信道复用技术</a></li>
</ul>
</li>
<li><a href="#%E4%B8%89-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">三、数据链路层</a>
<ul>
<li><a href="#31%E4%BD%BF%E7%94%A8%E7%82%B9%E5%AF%B9%E7%82%B9%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82">3.1使用点对点信道的数据链路层</a></li>
<li><a href="#32%E7%82%B9%E5%AF%B9%E7%82%B9%E5%8D%8F%E8%AE%AEppp-p70">3.2点对点协议PPP P70</a></li>
<li><a href="#33%E4%BD%BF%E7%94%A8%E5%B9%BF%E6%92%AD%E4%BF%A1%E9%81%93%E7%9A%84%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82-p76">3.3使用广播信道的数据链路层 P76</a></li>
<li><a href="#34mac%E5%9C%B0%E5%9D%80">3.4MAC地址</a></li>
<li><a href="#35%E6%89%A9%E5%B1%95%E7%9A%84%E4%BB%A5%E5%A4%AA%E7%BD%91">3.5扩展的以太网</a></li>
</ul>
</li>
<li><a href="#%E5%9B%9B-%E7%BD%91%E7%BB%9C%E5%B1%82">四、网络层</a>
<ul>
<li><a href="#41%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AEip">4.1网际协议IP</a>
<ul>
<li><a href="#411%E8%99%9A%E6%8B%9F%E4%BA%92%E8%BF%9E%E7%BD%91%E7%BB%9C">4.1.1虚拟互连网络</a></li>
<li><a href="#412%E5%88%86%E7%B1%BB%E7%9A%84ip%E5%9C%B0%E5%9D%80-p113">4.1.2分类的IP地址 P113</a></li>
<li><a href="#413ip%E5%9C%B0%E5%9D%80%E4%B8%8E%E7%A1%AC%E4%BB%B6%E5%9C%B0%E5%9D%80">4.1.3IP地址与硬件地址</a></li>
<li><a href="#414%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AEarp">4.1.4地址解析协议ARP</a></li>
<li><a href="#415-ip%E6%95%B0%E6%8D%AE%E6%8A%A5">4.1.5 IP数据报</a></li>
</ul>
</li>
<li><a href="#42%E5%88%92%E5%88%86%E5%AD%90%E7%BD%91-p128">4.2划分子网 P128</a></li>
<li><a href="#43%E6%9E%84%E9%80%A0%E8%B6%85%E7%BD%91%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80cidr">4.3构造超网（无分类编址CIDR）</a></li>
<li><a href="#44%E7%BD%91%E9%99%85%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AEicmp">4.4网际控制报文协议ICMP</a></li>
<li><a href="#45%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AE">4.5路由选择协议</a></li>
</ul>
</li>
<li><a href="#%E4%BA%94-%E8%BF%90%E8%BE%93%E5%B1%82">五、运输层</a>
<ul>
<li><a href="#51%E8%BF%90%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE%E6%A6%82%E8%BF%B0">5.1运输层协议概述</a></li>
<li><a href="#52%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE-udp">5.2用户数据报协议 UDP</a></li>
<li><a href="#53%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE-tcp">5.3传输控制协议 TCP</a></li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://Wangrongsheng.github.io/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://Wangrongsheng.github.io/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
</body>

</html>